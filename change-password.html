<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Ganti Password | SMK Denis Kusuma</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="sidebar">
  <h2>SMK DK</h2>
  <a href="dashboard.html">Dashboard</a>
  <a href="students.html">Data Siswa</a>
  <a href="teachers.html">Data Guru</a>
  <a href="announcement.html">Pengumuman</a>
  <a href="register.html">Buat Akun</a>
</div>

<div class="content">
  <h2>Ganti Password</h2>

  <input type="password" id="newpass" placeholder="Password baru">
  <br><br>
  <button onclick="changePassword()">Ganti Password</button>

  <p id="info"></p>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="js/firebase.js"></script>
<script src="js/guard.js"></script>

<script>
function changePassword() {
  const user = firebase.auth().currentUser;
  const newPass = document.getElementById("newpass").value;

  if (!user) {
    location.href = "index.html";
    return;
  }

  user.updatePassword(newPass)
    .then(() => {
      document.getElementById("info").innerText =
        "Password berhasil diganti";
    })
    .catch(error => {
      document.getElementById("info").innerText =
        error.message;
    });
}
</script>

</body>
</html>
